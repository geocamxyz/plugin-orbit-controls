(function(r,i){typeof exports=="object"&&typeof module<"u"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(r=typeof globalThis<"u"?globalThis:r||self,i(r.OrbitControls={}))})(this,function(r){"use strict";const i=function(b={}){let e,u,w,v,h,d=!1,s=0,a=0;const l=function(n){let o=e.fov();n.wheelDeltaY?o-=n.wheelDeltaY*.05:n.wheelDelta?o-=n.wheelDelta*.05:n.detail&&(o+=n.detail*1),(o<10||o>130)&&(o=o<10?10:130),e.fov(o)},c=function(n){d=!1},E=function(n){if(d){e.facing();const o=e.fov(),t=e.wrapper.clientHeight,D=o/t;let M=(n.clientX-u)*-D+v,m=(n.clientY-w)*-D+h;m=Math.max(-85,Math.min(85,m)),e.facing((360+M)%360),e.horizon(m)}},p=function(n){n.preventDefault(),u=n.clientX,w=n.clientY,v=e.facing(),h=e.horizon(),d=!0},g=function(){if(s){const o=performance.now()-a;let t=e.facing();t=t+50/1e3*o*s,e.facing((360+t)%360),a+=o,requestAnimationFrame(g)}},L=function(n){if(n.target.closest("input,calcite-input"))return;const o=n.key==="ArrowLeft"||n.key==="a",t=n.key==="ArrowRight"||n.key==="d";(o||t)&&(a=performance.now(),s=t?1:-1,requestAnimationFrame(g))},y=function(n){s=0};this.init=function(n){e=n,e.renderer.domElement.addEventListener("mousewheel",l,!1),e.renderer.domElement.addEventListener("DOMMouseScroll",l,!1),e.renderer.domElement.addEventListener("mousedown",p,!1),e.renderer.domElement.addEventListener("mouseup",c,!1),e.renderer.domElement.addEventListener("mouseleave",c,!1),e.renderer.domElement.addEventListener("mousemove",E,!1),window.addEventListener("keydown",L),window.addEventListener("keyup",y)},this.destroy=function(){e.renderer.domElement.removeEventListener("mousewheel",l,!1),e.renderer.domElement.removeEventListener("DOMMouseScroll",l,!1),e.renderer.domElement.removeEventListener("mousedown",p,!1),e.renderer.domElement.removeEventListener("mouseup",c,!1),e.renderer.domElement.removeEventListener("mouseleave",c,!1),e.renderer.domElement.removeEventListener("mousemove",E,!1),window.removeEventListener("keydown",L),window.removeEventListener("keyup",y)}};class f extends HTMLElement{constructor(){super(),this.controls=null,console.log("orbit-controls init")}connectedCallback(){console.log("orbit-controls connected"),this.plugin=new i;const e=this.parentNode;this.viewer=e.viewer,this.viewer&&this.viewer.plugin?this.viewer.plugin(this.plugin):console.error("GeocamViewerOrbitControls must be a child of GeocamViewer")}disconnectedCallback(){this.controls=null,this.viewer=null,console.log("orbit controls disconnected")}}window.customElements.define("geocam-viewer-orbit-controls",f),r.GeocamViewerOrbitControls=f,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
