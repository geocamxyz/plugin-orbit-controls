(function(t,r){typeof exports=="object"&&typeof module<"u"?r(exports):typeof define=="function"&&define.amd?define(["exports"],r):(t=typeof globalThis<"u"?globalThis:t||self,r(t.OrbitControls={}))})(this,function(t){"use strict";const r=function(y={}){let e,u,w,v,E,d=!1,s=0,a=0;const l=function(n){let o=e.fov();n.wheelDeltaY?o-=n.wheelDeltaY*.05:n.wheelDelta?o-=n.wheelDelta*.05:n.detail&&(o+=n.detail*1),(o<10||o>130)&&(o=o<10?10:130),e.fov(o)},c=function(n){d=!1},h=function(n){if(d){e.facing();const o=e.fov(),i=e.wrapper.clientHeight,b=o/i;let M=(n.clientX-u)*-b+v,m=(n.clientY-w)*-b+E;m=Math.max(-85,Math.min(85,m)),e.facing((360+M)%360),e.horizon(m)}},p=function(n){n.preventDefault(),u=n.clientX,w=n.clientY,v=e.facing(),E=e.horizon(),d=!0},g=function(){if(s){const o=performance.now()-a;let i=e.facing();i=i+50/1e3*o*s,e.facing((360+i)%360),a+=o,requestAnimationFrame(g)}},L=function(n){const o=n.keyCode;(o==37||o==39)&&(a=performance.now(),s=o==39?1:-1,requestAnimationFrame(g))},D=function(n){s=0};this.init=function(n){e=n,e.renderer.domElement.addEventListener("mousewheel",l,!1),e.renderer.domElement.addEventListener("DOMMouseScroll",l,!1),e.renderer.domElement.addEventListener("mousedown",p,!1),e.renderer.domElement.addEventListener("mouseup",c,!1),e.renderer.domElement.addEventListener("mouseleave",c,!1),e.renderer.domElement.addEventListener("mousemove",h,!1),window.addEventListener("keydown",L),window.addEventListener("keyup",D)},this.destroy=function(){e.renderer.domElement.removeEventListener("mousewheel",l,!1),e.renderer.domElement.removeEventListener("DOMMouseScroll",l,!1),e.renderer.domElement.removeEventListener("mousedown",p,!1),e.renderer.domElement.removeEventListener("mouseup",c,!1),e.renderer.domElement.removeEventListener("mouseleave",c,!1),e.renderer.domElement.removeEventListener("mousemove",h,!1),window.removeEventListener("keydown",L),window.removeEventListener("keyup",D)}};class f extends HTMLElement{constructor(){super(),this.controls=null,console.log("orbit-controls init")}connectedCallback(){console.log("orbit-controls connected"),this.controls=new r;const e=this.parentNode;e.viewer&&e.viewer.plugin?e.viewer.plugin(this.controls):console.error("GeocamViewerOrbitControls must be a child of GeocamViewer")}disconnectedCallback(){this.controls=null,console.log("orbit controls disconnected")}}window.customElements.define("geocam-viewer-orbit-controls",f),t.GeocamViewerOrbitControls=f,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
